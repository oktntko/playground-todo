# 📖 🈖️ リーディング１

この問題で確認したかったこと

読みやすいコードを書くべきことを知っているか？

## 命名規約に則る

プログラミング言語には命名規約があります。
知ってる人は知っている。知らない人は覚えてね。

Java では、クラス名、メソッド名、変数名、定数名で命名が異なります。[^1]

[^1]: 他の言語、PythonやJavaScriptにもあります。若干ルールが異なります。

|            |                                            | 例              |     |
| ---------- | ------------------------------------------ | --------------- | --- |
| クラス名   | アッパーキャメルケース(パスカルケース)     | GameController  |     |
| メソッド名 | ローワーキャメルケース(キャメルケース)     | gameController  |     |
| 変数名     | ローワーキャメルケース(キャメルケース)     | gameController  |     |
| 定数名     | アッパースネークケース(コンスタントケース) | GAME_CONTROLLER |     |

😕 課題の例では、メソッド名、変数名、定数名すべて間違っています。

## インデントを正しくする（フォーマッタをかける）

インデントとは？

> プログラミングの分野では、プログラムの構造を見やすくするために制御構文の内側にある行などの先頭に、一律に同じ幅の空白を挿入することです。[^2]

[^2]: [tech log](https://tech-compass.pro/contents/technology/programmingbasic-02/#:~:text=%E3%82%A4%E3%83%B3%E3%83%87%E3%83%B3%E3%83%88%E3%81%A8%E3%81%AF%E3%80%81%E6%96%87%E7%AB%A0%E3%81%AE,%E3%82%92%E6%8C%BF%E5%85%A5%E3%81%99%E3%82%8B%E3%81%93%E3%81%A8%E3%81%A7%E3%81%99%E3%80%82)

インデントは現場の規約によって異なります。
スペース2つだったり4つだったり、タブだったりします。
実際に何かは重要ではありません。整列されていることが重要です。

😕 課題の例では、for文のインデントと、メソッドの閉じかっこがずれています。

---

命名規約とインデントは設定が入っていれば VSCode が警告を出してくれます。
これを`Linter`といいます。
また、インデントも整列してくれます。これを`Formatter`といいます。

ためしに、 VSCode で適当にクラスを作って課題文を張り付けてみてください。
黄色い波線で何か言われないでしょうか？
また、保存すると勝手にインデントを整形してくれないでしょうか？

黄色い波線が出ない場合、まず拡張機能をチェックしてください。
++ctrl+shift+x++で拡張機能を表示し、一番下にある`RECOMMENDED`を確認してください。

- [Extension Pack for Java](https://marketplace.visualstudio.com/items?itemName=vscjava.vscode-java-pack) Formatterとかいろいろ入っている
- [Checkstyle for Java](https://marketplace.visualstudio.com/items?itemName=shengchen.vscode-checkstyle) Linter。設定は`google_checks.xml`を変えれば変えられる。
- [Gradle for Java](https://marketplace.visualstudio.com/items?itemName=vscjava.vscode-gradle) 今は使わないけど Gradle
- [Kotlin Language](https://marketplace.visualstudio.com/items?itemName=mathiasfrohlich.Kotlin) 今は使わないけど Kotlin

この拡張機能は"Ubuntu"にインストールする必要があります。

それでもダメなら、いったんクリーンアップ(Clean Workspace)しましょう。

![Image](../assets/java-clean-workspace.png){ width="480" }

---

## 名前で意味を示す

名前で意味を示すとは？

```java
  static final int zero = 0;
  static final int one = 1;
```

定数名に`ZERO`と`ONE`をつけています。
これは、**値を示している**だけです。
**意味を示しましょう**。

`0`が負けなら、`DEFEAT`  
`1`が勝ちなら、`VICTORY`  
ですね。

```java
    int a = 0; // 勝ちの数
    int b = 0; // 負けの数
```

勝ちの数、負けの数も意味を示せばコメントが不要になります。

```java
    int victoryCount = 0;
    int defeatCount = 0;
```

😕 課題の例では、名前に意味がありません。

## コメントにはコードから読み取れないことを書く

```java
  // 引数の VictoryOrDefeat の数だけループする
  for (int i = 0; i < VictoryOrDefeat.length; i++) {
```

このコメントは**for文の説明**です。VictoryOrDefeat の数だけループするのは当たり前です。
また、ループする回数は、正しくは VictoryOrDefeat の**要素数**です。引数は分裂しません。

```java
        a = a + 1; // 勝ちの数に１加算する
```

このコメントも、**足し算の説明**になっています。

---

ではそもそも、コードにコメントを書くのはなぜでしょうか？

コードをより読みやすく、わかりやすくするためです。
では、どうすれば読みやすく、わかりやすくなるでしょうか？

読み手がコードを読んで「？」と疑問を感じるところにコメントを書けばわかりやすくなりますね。
つまり、**コードから読み取れないことを書けばいいのです**。

例えば次のようなことはコメントしたほうが良いです。

- いろんなやり方がある中で、なぜそうしたのかを説明する。（理由）
- コードから読み取れない仕様や環境、状況を説明する。（背景）
- 誤用を防ぐための前提条件や注意点を示す。（前提）

**いろんなやり方がある中で、なぜそうしたのかを説明する。**の例としては、
素のfor文 `for (int i = 0; i < VictoryOrDefeat.length; i++) {` を使っていますが、
なぜ拡張for文 `for (int i : VictoryOrDefeat) {` を使わなかったのか？を説明すれば、読み手は納得したでしょう。[^3]

[^3]: 素のfor文を選んだ理由を思いつきませんでしたが、拡張for文が登場する前の(J2SE 5.0より前の)Javaなのかもしれません。

**コードから読み取れない仕様や環境、状況を説明する。**の例としては、
`0(負け)`でも`1(勝ち)`でもない値が与えられた時の処理がない理由として、

> `0(負け)`でも`1(勝ち)`でもない値はカウントしない。エラーにもしない。ログにも出力しない。

という仕様の説明が書かれていたら、読み手は`else`ブロックがない理由に納得したでしょう。

**誤用を防ぐための前提条件や注意点を示す。**の例としては、

> 引数`VictoryOrDefeat`は`null`でないこと。このメソッドでは`null`チェックをしません！

と書かれていたら、このメソッドを呼び出す人は引数の`null`チェックをしてからをメソッドを呼び出すでしょう。

😕 課題の例では、意味のあるコメントは一つもありません。

## コードに秩序を持たせる

そんな誤りだらけのコードですが、不具合ではありません。
明確な不具合は１つです。

```java
  static final int zero = 0;
  static final int one = 1;
```

定数の並び順は、`0`が負け、`1`が勝ちです。つまり、上が負け、下が勝ちです。
0,1,...と数の大小順に並べたのでしょう。

```java
    int a = 0; // 勝ちの数
    int b = 0; // 負けの数
```

変数宣言の時点では、上を勝ち、下に負けにしてしまっています。
言葉の順番`勝ち負け`にしたのでしょうか？

```java
    if (VictoryOrDefeat[i] == zero) {
        a = a + 1; // 勝ちの数に１加算する
      } else if (VictoryOrDefeat[i] == one) {
        b = b + 1; // 負けの数に１加算する
    }
```

その結果、`0(負け)`なら勝ちに加算、`1(勝ち)`なら負けに加算しています。

名前で意味を示すのが大前提ですが、
上が負け、下が勝ちのまま変数宣言をしていたら防げた不具合かもしれません。

/// admonition | これを書いて気になったこと
今までも、コード => 解説 の順番で書いてたっけ？
解説 => コード の順番で書いてなかったっけ？
///

😕 課題の例では、順番が入れ替わっていて頭が混乱します。

## まとめ

ただ動くだけでなく、読みやすくするためのポイントを紹介しました。

- 命名規約に則る
- インデントを正しくする（フォーマッタをかける）
- 名前で意味を示す
- コメントにはコードから読み取れないことを書く
- コードに秩序を持たせる

プログラミングに「言語」とつくくらいです。
**文章を書くつもり**でコードを書くましょう。

なぜ文章を書くのでしょうか？

もちろん、読んでもらうためです。
コーディングも同じです。

システムはできたら終わりではありません。
問題があったらコードを読まなくてはいけません。
新しい機能を作るにあたってもコードを読まなくてはいけません。

読んでもらうためにコードを書きましょう。[^4]

[^4]: そうでもなければ[リーダブルコード](https://www.amazon.co.jp/dp/4873115655)という本がベストセラーになることはありません。
